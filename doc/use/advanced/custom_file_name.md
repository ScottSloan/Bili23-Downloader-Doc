# 自定义下载文件名&自动分类
**最低支持版本：1.63.0**

<img src="https://s21.ax1x.com/2025/10/21/pVOtKHJ.png" alt="自定义下载文件名">

*图1 自定义下载文件名对话框示意图*

目前程序支持下载的视频分为三大类：`投稿视频`、`剧集`（番剧、电影等）和`课程`，其中`投稿视频`又可细分为`普通`（单个视频）、`分P`、`合集`和`互动视频`，每种类型均支持自定义。

:::tip  
对于收藏夹、个人主页和热榜，程序会自动识别其中的视频类型，按照相应的模板命名。
:::

<img src="https://s21.ax1x.com/2025/08/28/pV6geMt.png" alt="编辑模板">

*图2 编辑模板示意图*

文件名模板由**子目录**（可选）和**文件名**两部分组成。

* **子目录**：
    * **路径分隔符**：子目录层级之间必须使用正斜杠 `/` 进行分隔。由 `/` 分隔的最后一个部分将被视为`文件名`。
        * 示例：`{up_name}/{title}`
        * 效果：下载到以 UP 主名称（`{up_name}`）命名的子文件夹中，文件名称为`{title}`。
    * **可为空**：若未设置子目录路径，文件将直接保存至下载目录。
    * **支持设置多级子目录**
        * 示例：`{collection_title}/{section_title}/{part_title}/{zero_padding_number} - {title}`
        * 效果：文件下载到合集名称（`{collection_title}`）、章节名称（`{section_title}`）、分节名称（`{part_title}`）的子目录下，文件名为 `{zero_padding_number} - {title}`。
    * **空字段处理**：如果路径中某个字段为空，系统将自动忽略该层级，不会创建一个空的目录。
        * 示例：`{collection_title}/{section_title}/{part_title}/{zero_padding_number} - {title}`
        * 场景说明：在下载一个合集视频时，如果该合集**没有章节部分** （即`{section_title}`字段为空），程序会自动忽略该层级。文件的实际保存路径将是：`/{collection_title}/{part_title}/{zero_padding_number} - {title}`。

* **文件名**：
    * **不含后缀名**：程序会自动根据所下载的文件类型添加后缀名（如 `.mp4`、`.m4a`、`.flac`），无需再次添加。
    * **字段可重复添加**：同一字段可在`子目录`和`文件名`中出现多次。
        * 示例：`{up_name}_{up_uid}/{up_name} - {title} - {bvid}`

:::tip
在程序中双击字段列表中的任意字段，可快速将其添加到当前模板的末尾。  
:::

## 部分字段说明
### 分P视频
[示例视频](https://www.bilibili.com/video/BV1Rb4y1t7gc?p=4)

对于**分P视频**，提供**分P总标题**（`{part_title}`）和**分P序号**（`{page}`）字段，如图 3 所示。

<img src="https://s21.ax1x.com/2025/08/29/pV6oO0A.jpg" alt="分P视频">

*图3 分P视频示意图*

### 合集视频
[示例视频](https://www.bilibili.com/video/BV1zA7TzLEQe)

对于**合集视频**，提供**合集标题**（`{collection_title}`）、**章节标题**（`{section_title}`）和**分节标题**（`{part_title}`）字段。  
部分合集视频可能会包含章节和分节部分，如图 4 所示。

<img src="https://s21.ax1x.com/2025/09/02/pVgFxB9.png" alt="合集视频">

*图4 合集视频示意图*

但也可能都不包含，如图 5 所示。

<img src="https://s21.ax1x.com/2025/08/29/pV6T64P.png" alt="合集视频">

*图5 合集视频示意图*

### 剧集
[示例视频](https://www.bilibili.com/bangumi/play/ep693247)

对于**剧集**，提供**剧集标题**（`{series_title}`）、**章节标题**（`{section_title}`）、**标识**（`{badge}`）和**剧集编号**（`{episode_num}`）字段，如图 6、7 所示。  

<img src="https://s21.ax1x.com/2025/08/29/pV6ToEn.png" alt="剧集">

*图6* 剧集标题示意图

<img src="https://s21.ax1x.com/2025/09/02/pVgFI7n.jpg" alt="剧集">

*图7* 剧集示意图

### 课程
[示例视频](https://www.bilibili.com/cheese/play/ep158662)

对于**课程**，提供**课程标题**（`{series_title}`）、**章节标题**（`{section_title}`）和**标识**（`{badge}`）字段，如图 8 所示。

<img src="https://s21.ax1x.com/2025/09/02/pVgKvRA.png" alt="课程">

*图8* 课程示意图

### 时间字段
时间字段中格式可自定义，示例：
* `%Y-%m-%d` -> 输出 `2025-06-11`
* `%H-%M-%S` -> 输出 `11-26-45`
* `%Y-%m-%d %H-%M` -> 输出 `2025-06-11 11-26`

其他可用的格式化符号如下表所示。  

| 符号 | 解释 |
| --- | --- |
| %a | 本地简化星期名称 |
| %A | 本地完整星期名称 |
| %b | 本地简化的月份名称 |
| %B | 本地完整的月份名称 |
| %c | 本地相应的日期表示和时间表示 |
| %d | 月内中的一天（0-31）|
| %f | 微秒（000000-999999）|
| %H | 24小时制小时数（0-23）|
| %I | 12小时制小时数（01-12）|
| %j | 年内的一天（001-366）|
| %m | 月份（01-12）|
| %M | 分钟数（00-59）|
| %p | 本地A.M.或P.M.的等价符 |
| %S | 秒（00-59）|
| %U | 一年中的星期数（00-53）星期天为星期的开始 |
| %w | 星期（0-6），星期天为星期的开始 |
| %W | 一年中的星期数（00-53）星期一为星期的开始 |
| %x | 本地相应的日期表示 |
| %X | 本地相应的时间表示 |
| %y | 两位数的年份表示（00-99）|
| %Y | 四位数的年份表示（0000-9999）|
| %z | UTC 时区偏移（+HHMM，例如+0800）|
| %Z | 当前时区的名称 |
| %% | %号本身 |